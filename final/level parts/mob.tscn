[gd_scene load_steps=18 format=3 uid="uid://cawuunbmj2p1v"]

[ext_resource type="Script" path="res://final/level parts/mob.gd" id="1_a0nd1"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3pkvy"]
points = PackedVector3Array(-0.125207, -0.532801, -0.480507, 0.0227831, 0.47607, 0.498884, 0.169713, 0.559144, 0.464172, 0.231051, -0.803591, 0.320455, 0.40741, 0.651043, -0.243523, -0.482789, 0.594843, 0.0822132, -0.362868, -0.682312, 0.289697, 0.469044, -0.654529, -0.0662713, -0.127444, 0.842701, -0.338103, -0.393435, -0.683942, -0.244717, 0.438255, 0.623309, 0.200849, 0.0841477, 0.977454, 0.114795, -0.0682023, -0.976458, -0.12927, 0.20055, -0.563129, -0.451454, -0.185527, 0.595453, -0.453475, -0.273363, 0.592268, 0.407754, -0.00693649, -0.476823, 0.49966, 0.375821, -0.588614, 0.316955, 0.111579, 0.563059, -0.481177, -0.41725, 0.527866, -0.270497, -0.484546, -0.596972, -0.0665097, -0.279747, 0.908561, 0.0533361, -0.250197, -0.880712, 0.205319, 0.263647, -0.902771, -0.127394, 0.293368, 0.871526, -0.157196, 0.373412, -0.526319, -0.328246, 0.499663, 0.476641, -0.00688856, 0.0531056, 0.875001, 0.324703, -0.154543, -0.590854, 0.465879, -0.0972799, -0.782358, -0.398188, -0.387649, -0.498171, 0.31565, -0.30068, -0.587995, -0.388901)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gsdfo"]
albedo_color = Color(0.913725, 0, 0.0509804, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_gwvmq"]
material = SubResource("StandardMaterial3D_gsdfo")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bxmmh"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f8moc"]
transparency = 1
albedo_color = Color(0.698039, 0.364706, 0.2, 0.431373)

[sub_resource type="CylinderMesh" id="CylinderMesh_4cync"]
material = SubResource("StandardMaterial3D_f8moc")
top_radius = 0.25
bottom_radius = 7.0
height = 15.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_67r8j"]
points = PackedVector3Array(5.64611, -6.70442, 3.48408, -6.74263, -7.21754, -1.32868, -6.7234, -7.19702, 1.37246, -0.412486, 6.99168, 0.241957, 1.66324, -7.5, -6.77206, -1.09911, -7.18947, 6.76394, 6.5788, -7.23275, -2.01027, -3.98212, -7.12352, -5.54057, 1.42923, -7.5, 6.81967, 0.457602, 6.95157, -0.193087, -4.21364, -7.13911, 5.37762, 4.2721, -7.15598, -5.3437, 6.81209, -7.23941, 0.927495, -1.32868, -7.21753, -6.74263, -0.400363, 6.79741, -0.400363, 3.58003, -7.11175, 5.80202, 0.239481, 6.9123, 0.455152, -5.38547, -7.21307, -4.25886, -5.8212, -7.19538, 3.62115, 5.84144, -7.16027, -3.55668, 0.241235, 6.09678, -0.847171, -2.67336, -7.19315, 6.3172, 6.54964, -7.20058, 2.04884, -6.00686, -6.46241, -2.56131, 4.47611, -6.3605, 4.68782, 2.59451, -6.42637, -5.97323, 6.53402, -6.50919, -0.409525, -2.56051, -6.46041, -6.00626, -0.19253, 6.49936, 0.672829, 0.240616, -5.42781, -6.0557, 0.455152, 6.91231, 0.239481, 0.456863, -6.50497, 6.5298)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gadfh"]
transparency = 1
albedo_color = Color(1, 0, 0, 0.67451)

[sub_resource type="BoxMesh" id="BoxMesh_rw3nj"]
material = SubResource("StandardMaterial3D_gadfh")
size = Vector3(2, 2, 3)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_4m3lw"]
points = PackedVector3Array(-1, -1, -1.48808, 1, 1, 1.48808, 1, -1, 1.48808, 1, 1, -1.48808, -1, 1, 1.48808, -1, -1, 1.48808, 1, -1, -1.48808, -1, 1, -1.48808)

[sub_resource type="Animation" id="Animation_aaxd5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("model/body:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("dmgCounter:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("model/body:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("model:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("model/attackSpace/MeshInstance3D:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("model/attackSpace:monitoring")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_e6ftk"]
resource_name = "attack"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("model/attackSpace/MeshInstance3D:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("model/attackSpace:monitoring")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_kompd"]
resource_name = "damaged"
length = 1.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("model/body:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.523599, 0, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("model/body:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.3, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, -0.496371), Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("dmgCounter:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.3, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}

[sub_resource type="Animation" id="Animation_ty2i4"]
resource_name = "default"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("model/body:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("dmgCounter:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("model/body:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("model/attackSpace/MeshInstance3D:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("model/attackSpace:monitoring")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_qd873"]
resource_name = "search"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("model:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 3.1, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.12656, 0), Vector3(0, -1.13509, 0), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4g8eu"]
_data = {
"RESET": SubResource("Animation_aaxd5"),
"attack": SubResource("Animation_e6ftk"),
"damaged": SubResource("Animation_kompd"),
"default": SubResource("Animation_ty2i4"),
"search": SubResource("Animation_qd873")
}

[node name="mob" type="CharacterBody3D" groups=["mobs"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.75, 0)
collision_layer = 3
input_ray_pickable = false
script = ExtResource("1_a0nd1")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_3pkvy")

[node name="model" type="Node3D" parent="."]

[node name="body" type="MeshInstance3D" parent="model"]
mesh = SubResource("CapsuleMesh_gwvmq")
skeleton = NodePath("../..")

[node name="CSGSphere3D" type="CSGSphere3D" parent="model/body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.220586, 0.495756, 0.547603)
radius = 0.15
material = SubResource("StandardMaterial3D_bxmmh")

[node name="CSGSphere3D2" type="CSGSphere3D" parent="model/body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.20923, 0.390453, 0.547603)
radius = 0.15
material = SubResource("StandardMaterial3D_bxmmh")

[node name="searchSpace" type="Area3D" parent="model"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)
collision_layer = 2
collision_mask = 2
input_ray_pickable = false
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="model/searchSpace"]
transform = Transform3D(1, 0, 0, 0, -0.0251999, 0.999682, 0, -0.999682, -0.0251999, 0, 0, 5)
visible = false
mesh = SubResource("CylinderMesh_4cync")

[node name="CollisionShape3D" type="CollisionShape3D" parent="model/searchSpace"]
transform = Transform3D(1, 0, 0, 0, -0.0251999, 0.999682, 0, -0.999682, -0.0251999, 0, 0, 5)
shape = SubResource("ConvexPolygonShape3D_67r8j")

[node name="attackSpace" type="Area3D" parent="model"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)
visible = false
input_ray_pickable = false
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="model/attackSpace"]
mesh = SubResource("BoxMesh_rw3nj")
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="model/attackSpace"]
shape = SubResource("ConvexPolygonShape3D_4m3lw")

[node name="dmgCounter" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.51877, 0)
visible = false
billboard = 1
modulate = Color(128.498, 0, 0, 1)
text = "9001"
font_size = 79

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
callback_mode_process = 0
libraries = {
"": SubResource("AnimationLibrary_4g8eu")
}
autoplay = "default"

[connection signal="body_entered" from="model/searchSpace" to="." method="_on_search_space_body_entered"]
[connection signal="body_exited" from="model/searchSpace" to="." method="_on_search_space_body_exited"]
[connection signal="body_entered" from="model/attackSpace" to="." method="_on_attack_space_body_entered"]
[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
